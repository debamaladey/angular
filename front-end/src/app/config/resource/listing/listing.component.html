<app-header></app-header>
<app-nav></app-nav>
<section class="w-100 float-left common-wrap-all-page">
  <ng-scrollbar class="page-scroll">
    <div class="wrap-mani w-100 float-left">
      <div class="col-xl-12">
        <h1 class="float-left">Resources</h1>
        <!-- <span class="stages float-right">Step 4 of 5</span> -->
        <!-- <a mat-raised-button class="float-right btn-common2 btn-01 mar-right addbut" routerLink="/config/resource/add">Add
          Resource</a> -->
      </div>
      <!-- <div class="alert alert-{{msgStatus}} alert-dismissible" *ngIf="msg">
        {{msg}}
      </div> -->
      
      <div class="col-lg-12 data-table-wrap float-left">
          <form [formGroup]="resourceForm" (ngSubmit)="onSubmit()">
          <div class="float-left col-sm-12 col-md-3 col-lg-3 col-xl-3 c-w-f add-resource">
              <mat-label class="w-100 float-left">Select Resource</mat-label>
              <mat-form-field appearance="outline" class="w-100 float-left"> 
                  <mat-select disableOptionCentering formControlName="resource_id" (selectionChange)="getParameterList($event.value)">
                      <mat-option value="">Select Option</mat-option>
                      <mat-option *ngFor="let list of resourcesDeletedList" value="{{list.resource_id}}">{{list.resource_name}}</mat-option>
                  </mat-select>
                  <mat-error *ngIf="resourceForm.get('resource_id').invalid && (resourceForm.get('resource_id').dirty || resourceForm.get('resource_id').touched) && resourceForm.get('resource_id').errors.required">Resource
                      is required.</mat-error>
              </mat-form-field>
              
          </div>
          <div class="float-left col-sm-12 col-md-3 col-lg-3 col-xl-3 c-w-f add-resource">
            <mat-label class="w-100 float-left">Select Billing Parameter</mat-label>
            <mat-form-field appearance="outline" class="w-100 float-left"> 
                <mat-select disableOptionCentering formControlName="rp_id" (selectionChange)="getUnitList($event.value)">
                    <mat-option value="">Select Option</mat-option>
                    <mat-option *ngFor="let list of parameterList" value="{{list.rp_id}}">{{list.parameter_name}}</mat-option>
                </mat-select>
                <mat-error *ngIf="resourceForm.get('rp_id').invalid && (resourceForm.get('rp_id').dirty || resourceForm.get('rp_id').touched) && resourceForm.get('rp_id').errors.required"> Parameter
                    is required.</mat-error>
            </mat-form-field>
            
        </div>
        <div class="float-left col-sm-12 col-md-3 col-lg-3 col-xl-3 c-w-f add-resource">
          <mat-label class="w-100 float-left">Select Billing Unit</mat-label>
          <mat-form-field appearance="outline" class="w-100 float-left"> 
              <mat-select disableOptionCentering formControlName="ru_id">
                  <mat-option value="">Select Option</mat-option>
                  <mat-option *ngFor="let list of unitList" value="{{list.ru_id}}">{{list.unit_name}}</mat-option>
              </mat-select>
              <mat-error *ngIf="resourceForm.get('ru_id').invalid && (resourceForm.get('ru_id').dirty || resourceForm.get('ru_id').touched) && resourceForm.get('ru_id').errors.required"> Billing Unit
                  is required.</mat-error>
          </mat-form-field>
          
      </div>
      <div class="float-left col-sm-12 col-md-3 col-lg-3 col-xl-3 mar-top2">
          <button mat-raised-button class="float-left btn-common2 btn-01 mar-right" type="submit" [disabled]="!resourceForm.valid" >Add Resource</button>
        </div>
          </form>
        <div class="w-100 float-left inner-data-table">
          <table id="example" class="table table-striped table-bordered" style="width:100%">
            <thead>
              <tr>
                <th>ID</th>
                <th>Resource name</th>
                <th>Billing Unit name</th>
                <th>Total Unit</th>
                <th>Created By</th>
                <th>Created Date</th>
                <th width="15%" class="no-sort">Action</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let list of resourcesList; index as i">
                <td>{{i + 1}}</td>
                <td>{{list.resource_name}}</td>
                <td>{{list.unit_name}}</td>
                <td>{{list.total_unit}}</td>
                <td>{{list.user_name}}</td>
                <td>{{list.created_date|date:'yyyy-MM-dd HH:mm:ss'}}</td>
                <td>
                  <!-- <a routerLink="/config/resource/edit/{{list.resource_id}}" title="Edit Resource" class="btn-actions btn-edit float-left"><i class="material-icons">brush</i></a> -->
                  <a href="javascript:void(0)" (click)="updateDeleteStatus(list.resource_id)" title="Delete Resource" class="btn-actions btn-delete float-left"><i class="material-icons">delete_forever</i></a>
                  <a routerLink="/config/resource/unit/list/{{list.resource_id}}" title="View Resource Unit" class="btn-actions btn-edit float-left"><i class="material-icons">view_list</i></a>
                </td>
              </tr>
          </table>
        </div>
      </div>
    </div>
  </ng-scrollbar>
</section>