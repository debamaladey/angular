<app-header></app-header>
<app-nav></app-nav>

<section class="w-100 float-left common-wrap-all-page">
    <ng-scrollbar class="page-scroll">
        <div class="wrap-mani w-100 float-left">
            <div class="col-xl-12">
                <h1 class="float-left">Add Template</h1>
            </div>
            <!-- <div class="alert alert-{{msgStatus}} alert-dismissible" *ngIf="msg">
                {{msg}}
            </div> -->
            <form [formGroup]="templateForm" (ngSubmit)="onSubmit()">
                <div class="wrap-mani w-100 float-left">
                    <div class="col-lg-12 float-left wrap-set-value mar-top add-meter-wrap">
                        <div class="bg-inner-area w-100 float-left">
                            <div class="col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left c-w-f">
                                <mat-label class="w-100 float-left">Name</mat-label>
                                <mat-form-field class="example-full-width input-sideby" appearance="outline">
                                    <input matInput type="text" formControlName="temp_name" class="w-100">
                                    <mat-error *ngIf="form_temp_name.invalid && (form_temp_name.dirty || form_temp_name.touched) && form_temp_name.errors.required">Template
                                        Name is required.</mat-error>
                                </mat-form-field>

                            </div>
                            <div class="col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left c-w-f">
                                <mat-label class="w-100 float-left">State</mat-label>
                                <mat-form-field appearance="outline">
                                    <mat-select formControlName="state_id" disableOptionCentering (selectionChange)="generateCity($event.value)">
                                        <mat-option value="">Select Option</mat-option>
                                        <mat-option *ngFor="let stList of stateList" value="{{stList.id}}">{{stList.name}}</mat-option>
                                    </mat-select>
                                    <mat-error *ngIf="form_state_id.invalid && (form_state_id.dirty || form_state_id.touched) && form_state_id.errors.required">State
                                        is required.</mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left c-w-f">
                                <mat-label class="w-100 float-left">Region</mat-label>
                                <mat-form-field appearance="outline">
                                    <mat-select formControlName="city_id" disableOptionCentering>
                                        <mat-option value="">Select Option</mat-option>
                                        <mat-option *ngFor="let ctList of cityList" value="{{ctList.id}}">{{ctList.name}}</mat-option>
                                    </mat-select>
                                    <mat-error *ngIf="form_city_id.invalid && (form_city_id.dirty || form_city_id.touched) && form_city_id.errors.required">Region
                                        is required.</mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left c-w-f">
                                <mat-label class="w-100 float-left">Resource</mat-label>
                                <mat-form-field appearance="outline">
                                    <mat-select formControlName="resource_id" disableOptionCentering (selectionChange)="generateParameter($event.value)">
                                        <mat-option value="">Select Option</mat-option>
                                        <mat-option *ngFor="let rsList of resourceList" value="{{rsList.resource_id}}">{{rsList.resource_name}}</mat-option>
                                    </mat-select>
                                    <mat-error *ngIf="form_resource_id.invalid && (form_resource_id.dirty || form_resource_id.touched) && form_resource_id.errors.required">Resource
                                        is required.</mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left c-w-f">
                                <mat-label class="w-100 float-left">Parameter</mat-label>
                                <mat-form-field appearance="outline">
                                    <mat-select formControlName="rp_id" disableOptionCentering (selectionChange)="generateUnit($event.value)">
                                        <mat-option value="">Select Option</mat-option>
                                        <mat-option *ngFor="let paramList of parameterList" value="{{paramList.rp_id}}">{{paramList.parameter_name}}</mat-option>
                                    </mat-select>
                                    <mat-error *ngIf="form_rp_id.invalid && (form_rp_id.dirty || form_rp_id.touched) && form_rp_id.errors.required">Resource
                                        Parameter is required.</mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left c-w-f">
                                <mat-label class="w-100 float-left">Unit</mat-label>
                                <mat-form-field appearance="outline">
                                    <mat-select formControlName="ru_id" disableOptionCentering>
                                        <mat-option value="">Select Option</mat-option>
                                        <mat-option *ngFor="let unList of unitList" value="{{unList.ru_id}}">{{unList.unit_name}}</mat-option>
                                    </mat-select>
                                    <mat-error *ngIf="form_ru_id.invalid && (form_ru_id.dirty || form_ru_id.touched) && form_ru_id.errors.required">Resource
                                        Unit is required.</mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="wrap-mani w-100 float-left">
                    <div class="col-lg-12 float-left wrap-set-value mar-top add-meter-wrap">
                        <div class="bg-inner-area w-100 float-left">
                            <div *ngFor="let tr of tablesArr" class="col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left checkbox-wrap check-side check-add-edit ">
                                <mat-checkbox formControlName="checkbox_{{tr.id}}" >{{tr.val}} Variable</mat-checkbox>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-12 float-left wrap-button mar-bottom">
                    <button mat-raised-button class="float-left btn-common2 btn-01 mar-right" type="submit" [disabled]="!templateForm.valid">Save</button>
                    <button (click)="goToTemplateList()" mat-raised-button class="float-left btn-common2 btn-01 mar-right">Back</button>
                </div>
            </form>

        </div>
    </ng-scrollbar>
</section>